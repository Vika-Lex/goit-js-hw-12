{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43029074-bbcb488b86e9977f1b5ed3d25';\nconst spinner = document.querySelector('.loader-container');\n\nlet page = 1;\n\nexport function resetPage() {\n  page = 1;\n}\nexport function increasePage() {\n  page++;\n}\n\nexport async function getData(query) {\n  try {\n    let url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n    const responce = await axios.get(url);\n    increasePage();\n    return responce;\n  } catch (error) {\n    iziToast.error({\n      message: err.message,\n      backgroundColor: '#FC3D03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n    spinner.classList.add('hidden');\n  }\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(element => {\n      return `\n      <li class=\"js-gallery-item\">\n      <a href=\"${element.largeImageURL}\" alt=\"${element.tags}\">\n      <img width=\"300\" src=\"${element.webformatURL}\" alt=\"${element.tags}\"/>\n      <ul class=\"gallery__description-list gallery-description-list\">\n         <li class=\"gallery-description-list__item\">\n           <h3>Likes</h3>\n           <p>${element.likes}</p>\n         </li>\n         <li class=\"gallery-description-list__item\">\n           <h3>Views</h3>\n           <p>${element.views}</p>\n         </li>\n         <li class=\"gallery-description-list__item\">\n           <h3>Comments</h3>\n           <p>${element.comments}</p>\n         </li>\n         <li class=\"gallery-description-list__item\">\n           <h3>Downloads</h3>\n           <p>${element.downloads}</p>\n         </li>\n       </ul>\n\n      </a>\n    \n      </li>\n      `;\n    })\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getData, resetPage } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  spinner: document.querySelector('.loader-container'),\n  btnLoadMore: document.querySelector('.btn-load_more'),\n};\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n});\n\nlet query = '';\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.btnLoadMore.addEventListener('click', handleLoadMore);\nwindow.addEventListener('wheel', handleWheel);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  refs.btnLoadMore.classList.add('btn-load_more-hidden');\n  resetPage();\n  query = event.target.elements.request.value;\n  refs.spinner.classList.remove('hidden');\n\n  const res = await getData(query);\n  if (res.data.hits.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#FC3D03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n    refs.spinner.classList.add('hidden');\n    event.target.reset();\n    return;\n  }\n  refs.btnLoadMore.classList.remove('btn-load_more-hidden');\n  refs.gallery.innerHTML = '';\n  refs.gallery.insertAdjacentHTML('afterbegin', createMarkup(res.data.hits));\n  gallery.refresh();\n  refs.spinner.classList.add('hidden');\n  event.target.reset();\n}\n\nasync function handleLoadMore(event) {\n  refs.btnLoadMore.classList.add('btn-load_more-hidden');\n  refs.spinner.classList.remove('hidden');\n  const res = await getData(query);\n  refs.btnLoadMore.classList.remove('btn-load_more-hidden');\n  refs.gallery.insertAdjacentHTML('beforeend', createMarkup(res.data.hits));\n  gallery.refresh();\n  refs.spinner.classList.add('hidden');\n  if (res.data.hits.length === 0) {\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: '#FC3D03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n    refs.btnLoadMore.classList.add('btn-load_more-hidden');\n    return;\n  }\n}\nfunction getBoundingClientRect() {\n  if (refs.gallery.children[0]) {\n    return refs.gallery.children[0].offsetHeight * 2;\n  }\n}\n\nfunction handleWheel(event) {\n  if (event.deltaY > 0) {\n    if (getBoundingClientRect()) {\n      window.scrollBy(0, getBoundingClientRect());\n    }\n  } else {\n    if (getBoundingClientRect()) {\n      window.scrollBy(0, -getBoundingClientRect());\n    }\n  }\n}\n"],"names":["BASE_URL","API_KEY","spinner","page","resetPage","increasePage","getData","query","url","responce","axios","iziToast","createMarkup","arr","element","refs","gallery","SimpleLightbox","handleSubmit","handleLoadMore","handleWheel","event","res","getBoundingClientRect"],"mappings":"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"}